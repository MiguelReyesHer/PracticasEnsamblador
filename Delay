;REYES HERN√ÅNDEZ MIGUEL ANGEL
;DELAY

;EJEMPLO: 8 LEDS ESTAN CONECTADOS A UN PUERTO I/O. EL PROGRAMA ALTERNA LOS LED ENUMERANDO VALORES
;A 0X55 Y 0XAA. CALCULAR EL DELAY. ASUMIR UNA FRECUENCIA DE 100 MHZ PARA EL CLK

    AREA LEDS_IO, CODE, READONLY
    EXPORT __main

PORT_ADDR EQU 0X4001080c    ;PERIFERICOS EN LA RAM

__main
    PROC
    LDR R1, =PORT_ADDR          
    
AGAIN
    MOV R0,#0X55
    STRB R0,[R1]            ;ALMACENA EL VALOR 0X55 EN EL PUERO
    BL DELAY               
    MOV R0,#0XAA
    STRB R0,[R1]            ;ALMACENA EL VALOR 0XAA EN EL PUERO
    BL DELAY
    B AGAIN
    ENDPROC

DELAY
    PROC
    MOV R3,#100             ;CONTADOR  
L1
    LDR R4,=250000          ;TIEMPO
L2
    SUBS R4,R4,#1
    BNE L1
    BX LR
    
    ENDPROC

    END
